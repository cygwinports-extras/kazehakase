--- origsrc/kazehakase-0.5.6/src/net/gnet.h	2008-10-28 10:09:16.000000000 -0500
+++ src/kazehakase-0.5.6/src/net/gnet.h	2009-01-02 02:44:19.487500000 -0600
@@ -28,10 +28,6 @@
 #ifndef _GNET_H
 #define _GNET_H
 
-#ifdef __CYGWIN__
-#  define __USE_W32_SOCKETS
-#endif
-
 #include <glib.h>
 #ifdef G_OS_WIN32
 #  define GNET_WIN32
--- origsrc/kazehakase-0.5.6/src/net/inetaddr.c	2008-10-28 10:09:16.000000000 -0500
+++ src/kazehakase-0.5.6/src/net/inetaddr.c	2009-01-02 02:44:19.534375000 -0600
@@ -1027,7 +1027,11 @@
 	      /* Save the address */
 	      ia = g_new0(GInetAddr, 1);
 	      ia->ref_count = 1;
+#if HAVE_INET6
 	      ia->sa.ss_family = (size == 4)? AF_INET : AF_INET6;
+#else
+	      ia->sa.ss_family = AF_INET;
+#endif
 	      GNET_INETADDR_SET_SS_LEN(ia);
 	      memcpy(GNET_INETADDR_ADDRP(ia), buf, size);
 	      GNET_INETADDR_PORT(ia) = g_htons(state->port);
